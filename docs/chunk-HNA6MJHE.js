import{a as L,b as $}from"./chunk-HXE5ZVOS.js";import"./chunk-SICOUY3U.js";import{c as q,d as E}from"./chunk-DDGM5LHP.js";import{b as A}from"./chunk-IGA735VE.js";import"./chunk-S4X54GI7.js";import{g as k}from"./chunk-K2VRAM2W.js";import"./chunk-GT5XWC6Y.js";import{$a as h,Cb as x,D as m,Kb as V,M as p,Na as c,Sa as l,X as r,_ as u,ab as b,bb as w,da as v,db as y,ea as _,fb as S,hb as C,ib as D,j as g,jb as n,kb as a,lb as f,mb as M,ub as T,vb as d}from"./chunk-EHZV42NC.js";var F=()=>[E],j=(t,i)=>i.id;function I(t,i){if(t&1&&(n(0,"div",4),f(1,"app-movie-tv-card",5),a()),t&2){let o=i.$implicit,e=d(2);l(),y("model",o)("isMovie",e.q==="movie")}}function W(t,i){t&1&&(n(0,"h6",6),x(1,"No data available"),a())}function G(t,i){if(t&1){let o=M();n(0,"button",7),T("click",function(){v(o);let s=d(2);return _(s.loadMoreData())}),x(1," Load More "),a()}}function O(t,i){if(t&1&&(n(0,"section",0)(1,"div",1),C(2,I,2,2,"div",8,j,!1,W,2,0,"h6",9),a(),n(5,"div",2),h(6,G,2,0,"button",3),a()()),t&2){let o=d();l(2),D(o.data()),l(4),S(6,o.page<o.totalPages?6:-1)}}function z(t,i){t&1&&f(0,"app-spinner")}var X=(()=>{let i=class i{constructor(){this.titleService=r(k),this.route=r(A),this.moviesService=r(L),this.tvShowsService=r($),this.destroy$=new g,this.data=c([]),this.page=0,this.isLoading=c(!0)}ngOnInit(){this.titleService.setTitle("Cinemaze | View All"),this.q=this.route.snapshot.queryParams.q,this.type=this.route.snapshot.queryParams.type,this.genreId=this.route.snapshot.queryParams.genre,this.loadData()}loadData(){switch(this.q){case"movie":this.genreId?this.getMovieWithGenre():this.type&&this.getMovies();break;case"tv-show":this.type&&this.getTvShow();break;default:this.isLoading.set(!1);break}}setData(e){this.data.update(s=>[...s,...e?.results||[]]),this.totalPages=e.total_pages,this.isLoading.set(!1)}getMovieWithGenre(){this.page=this.page+1,this.moviesService.getMovieWithGenre(this.genreId,this.page).pipe(m(1),p(this.destroy$)).subscribe({next:e=>{this.setData(e)},error:e=>{console.error(e.status_message),this.isLoading.set(!1)}})}getMovies(){this.page=this.page+1,this.moviesService.getMovies(this.type,this.page).pipe(m(1),p(this.destroy$)).subscribe({next:e=>{this.setData(e)},error:e=>{console.error(e.status_message),this.isLoading.set(!1)}})}getTvShow(){this.page=this.page+1,this.tvShowsService.getTVShows(this.type,this.page).pipe(m(1),p(this.destroy$)).subscribe({next:e=>{this.setData(e)},error:e=>{console.error(e.status_message),this.isLoading.set(!1)}})}loadMoreData(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=u({type:i,selectors:[["app-view-all"]],standalone:!0,features:[V],decls:4,vars:1,consts:[[1,"max-w-[940px]","mx-auto","md:px-8","sm:px-6","px-4","xl:px-0","pt-8","md:pt-6"],[1,"flex","flex-wrap","xs:gap-4","gap-[14px]","justify-center"],[1,"w-full","flex","items-center","justify-center","mt-4","md:mt-2","mb-4"],["type","button","class","focus:outline-none text-white font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 bg-red-600 hover:bg-red-700"],[1,"flex","flex-col","xs:gap-4","gap-2","max-w-[170px]","md:max-w-[190px]","lg:mb-6","md:mb-5","sm:mb-4","mb-[10px]"],[3,"model","isMovie"],[1,"text-lg","font-bold","text-white"],["type","button",1,"focus:outline-none","text-white","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","bg-red-600","hover:bg-red-700",3,"click"],["class","flex flex-col xs:gap-4 gap-2 max-w-[170px] md:max-w-[190px] lg:mb-6 md:mb-5 sm:mb-4 mb-[10px]"],["class","text-lg font-bold text-white"]],template:function(s,P){s&1&&(h(0,O,7,2)(1,z,1,0),b(2,0,F,null,1)),s&2&&(l(2),w(!P.isLoading()))},dependencies:[q]});let t=i;return t})();export{X as ViewAllComponent};
