import{a as C}from"./chunk-YUHTMLEM.js";import"./chunk-SICOUY3U.js";import{c as S,e as b}from"./chunk-Q5LKWL7Z.js";import"./chunk-5XSUVUQD.js";import"./chunk-YWHKL5VD.js";import{o as x}from"./chunk-S5NHJLHY.js";import{A as m,D as h,La as s,M as u,Ta as d,U as l,Ua as M,Va as f,X as g,Xa as n,bb as y,cb as w,db as v,j as c,jb as _,vb as T}from"./chunk-ULJBGOCL.js";var $=()=>[b];function L(i,t){if(i&1&&(y(0,"section",0),v(1,"app-movie-tv-list",1)(2,"app-movie-tv-list",1)(3,"app-movie-tv-list",1),w()),i&2){let p=_();s(),n("title","Now Playing")("movies",p.nowPlayingMovies)("isMovie",!0)("withType","now_playing"),s(),n("title","Popular")("movies",p.popularMovies)("isMovie",!0)("withType","popular"),s(),n("title","Upcoming")("movies",p.upcomingMovies)("isMovie",!0)("withType","upcoming")}}function k(i,t){i&1&&v(0,"app-spinner")}var z=(()=>{let t=class t{constructor(){this.titleService=l(x),this.moviesService=l(C),this.destroy$=new c,this.nowPlayingMovies=[],this.upcomingMovies=[],this.popularMovies=[]}ngOnInit(){this.titleService.setTitle("Cinemaze | Movies"),this.getAllMovies()}getAllMovies(){this.isLoading=!0;let o=this.getMovies("now_playing",1),e=this.getMovies("popular",1),r=this.getMovies("upcoming",1);o.pipe(m(e,r)).subscribe({next:([a,D,P])=>{this.handleMoviesResponse("now_playing",a.results),this.handleMoviesResponse("popular",D.results),this.handleMoviesResponse("upcoming",P.results),this.isLoading=!1},error:a=>{this.isLoading=!1,console.error(a.status_message)}})}getMovies(o,e){return this.moviesService.getMovies(o,e).pipe(h(1),u(this.destroy$))}handleMoviesResponse(o,e){switch(o){case"now_playing":this.nowPlayingMovies=e||[];break;case"popular":this.popularMovies=e||[];break;case"upcoming":this.upcomingMovies=e||[];break}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g({type:t,selectors:[["app-movies"]],standalone:!0,features:[T],decls:4,vars:1,consts:[[1,"px-4","pt-4","md:pt-2"],[3,"title","movies","isMovie","withType"]],template:function(e,r){e&1&&(d(0,L,4,12)(1,k,1,0),M(2,0,$,null,1)),e&2&&(s(2),f(!r.isLoading))},dependencies:[S]});let i=t;return i})();export{z as MoviesComponent};
